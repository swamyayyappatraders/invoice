<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Invoice</title>
<link rel="stylesheet" href="style.css">

<style>
body {
    font-family: Arial, sans-serif;
    background: #ffffff;
    margin: 0;
    padding: 0;
}

.invoice-wrapper {
    max-width: 900px;
    margin: 0 auto;
    padding: 30px;
}

.header {
    text-align: center;
    margin-bottom: 20px;
}

.header img {
    width: 80px;
    margin-bottom: 10px;
}

.header h1 {
    margin: 0;
    font-size: 24px;
    font-weight: 700;
}

.header p {
    margin: 3px 0;
    font-size: 14px;
}

hr {
    margin: 15px 0;
    border: none;
    border-top: 1px solid #ccc;
}

/* Section Layout */
.section-row {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    margin-bottom: 10px;
}

/* Table */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}

table th {
    background: #f2f2f2;
    padding: 8px;
    text-align: left;
    border: 1px solid #ccc;
    font-weight: bold;
}

table td {
    padding: 8px;
    border: 1px solid #ccc;
    font-size: 14px;
}

/* Amount Section */
.amount-section p {
    font-size: 15px;
    margin: 6px 0;
}

.amount-section span {
    font-weight: bold;
}

/* Signature */
.signature-block {
    margin-top: 40px;
    text-align: right;
    font-size: 15px;
}

.signature-line {
    width: 200px;
    border-top: 1px solid #333;
    margin-left: auto;
    margin-bottom: 5px;
}

/* Footer */
.footer {
    margin-top: 30px;
    text-align: center;
    font-size: 13px;
    color: #444;
}

@media print {
    body {
        -webkit-print-color-adjust: exact !important;
        color-adjust: exact !important;
    }
}
</style>

</head>
<body>

<div class="invoice-wrapper">

    <!-- HEADER -->
    <div class="header">
        <img src="logo.png">
        <h1>SRI SWAMY AYYAPPA TRADERS</h1>
        <p>Mahatma Gandhi Wholesale Commercial Complex</p>
        <p>Shop No 397, Gollapudi, Vijayawada ‚Äì 521225</p>
        <p><b>GSTIN:</b> 37AUTPV5283H1ZO</p>
    </div>

    <hr>

    <!-- Invoice + Customer -->
    <div class="section-row">
        <div><b>Invoice No:</b> <span id="invoiceID"></span></div>
        <div><b>Date:</b> <span id="invoiceDate"></span></div>
    </div>

    <div class="section-row">
        <div><b>Customer Name:</b> <span id="customerName"></span></div>
        <div><b>Phone:</b> <span id="customerPhone"></span></div>
    </div>

    <hr>

    <!-- TABLE -->
    <table id="itemsTable">
        <tr>
            <th>Description</th>
            <th>Qty (KG)</th>
            <th>Rate</th>
            <th>Amount</th>
        </tr>
    </table>

    <!-- AMOUNT SECTION -->
    <div class="amount-section">
        <p><b>Total Amount:</b> ‚Çπ<span id="totalAmount"></span></p>
        <p><b>Paid Amount:</b> ‚Çπ<span id="paidAmount"></span></p>
        <p><b>Balance:</b> ‚Çπ<span id="balance"></span></p>
        <p><b>Amount in words:</b> <span id="amountWords"></span></p>
    </div>

    <hr>

    <!-- NOTES -->
    <p><b>Notes:</b></p>
    <p id="notes"></p>

    <!-- SIGNATURE -->
    <div class="signature-block">
        <div class="signature-line"></div>
        Authorised Signature
    </div>

    <!-- FOOTER -->
    <div class="footer">
        Thank you for your business! üôè<br>
        <small>This is a computer-generated invoice.</small>
    </div>

</div>

<script>
// Read URL params
const p = new URLSearchParams(window.location.search);

// Multi-item support
const descriptions = p.get("description")?.split("||") || [];
const qtys = p.get("qty")?.split("||") || [];
const rates = p.get("rate")?.split("||") || [];
const amts = p.get("amount")?.split("||") || [];

const table = document.getElementById("itemsTable");

for (let i = 0; i < descriptions.length; i++) {
    if (!descriptions[i]) continue;
    let row = `
        <tr>
            <td>${descriptions[i]}</td>
            <td>${qtys[i]}</td>
            <td>‚Çπ${rates[i]}</td>
            <td>‚Çπ${amts[i]}</td>
        </tr>`;
    table.insertAdjacentHTML("beforeend", row);
}

// Amount in Words
function numberToWords(num) {
    const a = ["", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Eleven",
               "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen"];
    const b = ["", "", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"];

    if (num === 0) return "Zero";

    if (num < 20) return a[num];
    if (num < 100) return b[Math.floor(num / 10)] + " " + a[num % 10];
    if (num < 1000) return a[Math.floor(num / 100)] + " Hundred " + numberToWords(num % 100);

    return " " + num;
}

let total = parseInt(p.get("totalAmount") || 0);
document.getElementById("amountWords").innerText =
    numberToWords(total) + " Only";

// Fill simple fields
document.getElementById("invoiceID").innerText = p.get("invoiceID");
document.getElementById("invoiceDate").innerText = p.get("invoiceDate");
document.getElementById("customerName").innerText = p.get("customerName");
document.getElementById("customerPhone").innerText = p.get("customerPhone");
document.getElementById("totalAmount").innerText = p.get("totalAmount");
document.getElementById("paidAmount").innerText = p.get("paidAmount");
document.getElementById("balance").innerText = p.get("balance");
document.getElementById("notes").innerText = p.get("notes") || "None";
</script>

</body>
</html>
